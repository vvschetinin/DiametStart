# Документация плагина SmoothScrollSpy

Плагин `SmoothScrollSpy` — это легкое и гибкое решение на TypeScript для создания профессиональной навигации на одностраничных сайтах (landing pages). Он позволяет реализовать плавную прокрутку к секциям, автоматически подсвечивать активный пункт меню при скролле и управлять мобильным меню.

## Основные возможности

- **Плавная прокрутка (Smooth Scroll):** Обеспечивает плавное перемещение к нужной секции страницы по клику на пункт меню, а не мгновенный "прыжок".
- **Отслеживание секций (Scroll Spy):** Автоматически определяет, какая секция в данный момент находится в области просмотра, и подсвечивает соответствующий пункт в меню.
- **Управление мобильным меню:** Корректно работает с мобильной навигацией, автоматически закрывая ее после выбора пункта.
- **Учет фиксированного хедера:** При расчете позиции для прокрутки и определения активной секции плагин учитывает высоту "липкого" хедера, чтобы контент не перекрывался.
- **Гибкая настройка:** Позволяет легко изменять селекторы и CSS-классы через объект настроек, не трогая код самого плагина.

## Требования к HTML-разметке

Для корректной работы плагина ваша HTML-структура должна соответствовать нескольким простым правилам:

1.  Каждая целевая секция, к которой ведет ссылка из меню, должна иметь уникальный атрибут `id`.
2.  Каждая ссылка в меню (`<a>`) должна иметь атрибут `href`, значение которого совпадает с `id` целевой секции (включая символ `#`).

### Пример структуры

```html
<!-- Фиксированный хедер (важно, чтобы у него был класс) -->
<header class="header">
  <!-- Десктопное меню -->
  <ul class="main-menu">
    <li><a href="#about">О нас</a></li>
    <li><a href="#services">Услуги</a></li>
    <li><a href="#contacts">Контакты</a></li>
  </ul>

  <!-- Кнопка-бургер для мобильного меню -->
  <button class="nav-toggle" aria-label="Открыть меню"></button>

  <!-- Само мобильное меню -->
  <nav class="header-nav">
    <ul class="menu-mobil">
      <li><a href="#about">О нас</a></li>
      <li><a href="#services">Услуги</a></li>
      <li><a href="#contacts">Контакты</a></li>
    </ul>
  </nav>
</header>

<main>
  <!-- Секции с соответствующими ID -->
  <section id="about">
    <h2>О нас</h2>
    ...
  </section>

  <section id="services">
    <h2>Наши услуги</h2>
    ...
  </section>

  <section id="contacts">
    <h2>Контакты</h2>
    ...
  </section>
</main>
```

## Установка и подключение

1.  **Создайте файлы:**
    В папке с исходными кодами (`src/`) создайте два файла:
    - `SmoothScrollSpy.ts`: В него нужно скопировать код плагина.
    - `main.ts`: В этом файле будет производиться инициализация плагина.

2.  **Экспорт/Импорт:**
    Плагин `SmoothScrollSpy.ts` использует `export`, чтобы сделать класс доступным. Файл `main.ts` использует `import`, чтобы подключить его.

3.  **Сборка проекта:**
    Браузеры не выполняют TypeScript напрямую. Вам понадобится сборщик проектов, такой как **Vite** или **Parcel**, либо компилятор `tsc` для преобразования `.ts` файлов в один рабочий `.js` файл.

## Использование (Инициализация)

В вашем главном файле (`main.ts`) импортируйте класс и создайте его экземпляр после полной загрузки DOM.

### Простая инициализация

Этот код использует все настройки по умолчанию. Он будет работать с разметкой, описанной выше.

```typescript
// main.ts
import { SmoothScrollSpy } from "./SmoothScrollSpy";

document.addEventListener("DOMContentLoaded", () => {
  // Просто создаем экземпляр плагина. Вся логика запускается в конструкторе.
  new SmoothScrollSpy();
});
```

## Конфигурация (Настройки)

Вы можете гибко настроить плагин, передав объект с опциями в конструктор. Это полезно, если ваши классы или структура отличаются от стандартных.

| Опция               | Тип      | По умолчанию                    | Описание                                                                     |
| ------------------- | -------- | ------------------------------- | ---------------------------------------------------------------------------- |
| `menuLinksSelector` | `string` | `'.main-menu a, .menu-mobil a'` | CSS-селектор для выбора всех ссылок в десктопном и мобильном меню.           |
| `navToggleSelector` | `string` | `'.nav-toggle'`                 | CSS-селектор для кнопки-бургера, открывающей/закрывающей мобильное меню.     |
| `headerSelector`    | `string` | `'.header'`                     | CSS-селектор для фиксированного хедера. Его высота будет учтена при скролле. |
| `sectionsSelector`  | `string` | `'section[id]'`                 | CSS-селектор для всех секций, за которыми нужно следить.                     |
| `activeClass`       | `string` | `'active'`                      | CSS-класс, который добавляется активной ссылке в меню.                       |
| `menuOpenClass`     | `string` | `'menu-open'`                   | CSS-класс, который добавляется `<body>` при открытом мобильном меню.         |

### Пример инициализации с кастомными настройками

```typescript
// main.ts
import { SmoothScrollSpy } from "./SmoothScrollSpy";

document.addEventListener("DOMContentLoaded", () => {
  new SmoothScrollSpy({
    headerSelector: ".site-header",
    activeClass: "current-link",
  });
});
```

## Требования к CSS

Для визуального отображения работы плагина необходимо добавить стили для двух ключевых классов.

1.  **`.active`** (или ваш кастомный класс) — для подсветки активной ссылки.
2.  **`.menu-open`** (или ваш кастомный класс) — для отображения мобильного меню.

### Пример CSS

```css
/* Стиль для активной ссылки в меню */
.main-menu a.active,
.menu-mobil a.active {
  color: #ff6347; /* Яркий цвет для примера */
  font-weight: bold;
}

/* 
  Логика для мобильного меню.
  Изначально меню скрыто (например, за пределами экрана).
*/
.header-nav {
  position: fixed;
  top: 0;
  right: 0;
  transform: translateX(100%);
  transition: transform 0.3s ease-in-out;
  /* Другие стили: ширина, высота, фон... */
}

/* 
  Когда на <body> появляется класс .menu-open,
  мы сдвигаем меню в область видимости.
*/
body.menu-open .header-nav {
  transform: translateX(0);
}
```

## Часто задаваемые вопросы (Troubleshooting)

**Вопрос:** Я вижу в редакторе предупреждение `'scroller' is declared but its value is never read. ts(6133)`.

**Ответ:** Это нормально. Вся логика плагина запускается в момент его создания (`new SmoothScrollSpy()`). Сохранять экземпляр в переменную не обязательно. Чтобы убрать предупреждение, просто вызывайте конструктор без присваивания: `new SmoothScrollSpy();`.

**Вопрос:** Прокрутка происходит, но верхняя часть секции оказывается под хедером.

**Ответ:** Убедитесь, что селектор в опции `headerSelector` (по умолчанию `.header`) правильно указывает на ваш фиксированный хедер. Если хедера нет, прокрутка будет идти к самому верху секции.

**Вопрос:** Активный пункт меню подсвечивается неточно или с задержкой.

**Ответ:** Точность зависит от высоты секций и хедера. Алгоритм определяет секцию как активную, когда ее верхняя граница пересекает определенную точку на экране. Для большинства случаев стандартные настройки работают хорошо. Убедитесь, что у ваших секций есть достаточная высота.
